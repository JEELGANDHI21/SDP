{"ast":null,"code":"var _jsxFileName = \"E:\\\\SDP\\\\client\\\\src\\\\Components\\\\ProductDetail.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProductDetail = () => {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const {\n    product\n  } = location.state || {};\n  const [isEditingPrice, setIsEditingPrice] = useState(false);\n  const [editedPrice, setEditedPrice] = useState((product === null || product === void 0 ? void 0 : product.price) || \"\");\n  const handleEditPrice = () => {\n    setIsEditingPrice(true);\n  };\n  const handleSavePrice = async event => {\n    event.preventDefault();\n\n    // Perform validation (optional)\n    if (!editedPrice || isNaN(editedPrice)) {\n      alert(\"Please enter a valid price.\");\n      return;\n    }\n\n    // Update price logic (use API call, state management, etc.)\n    const newPrice = parseFloat(editedPrice);\n    const updatedProduct = {\n      ...product,\n      price: newPrice\n    };\n\n    // Make API call to update the price on the server\n    try {\n      const response = await fetch(`/api/products/${product.id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(updatedProduct)\n      });\n      if (response.ok) {\n        const uploaderUserId = product.studentId;\n        notifyUser(uploaderUserId, updatedProduct);\n      } else {\n        console.error(\"Failed to update product:\", response.statusText);\n      }\n    } catch (error) {\n      console.error(\"Error updating product:\", error.message);\n    }\n\n    // Redirect or display confirmation message\n    navigate(\"/home\"); // Redirect to product list\n  };\n  const notifyUser = (userId, updatedProduct) => {\n    // Implement the notification mechanism here\n    // This could be sending an email, in-app notification, etc.\n    // You may need to make another API call to get user contact details.\n    console.log(`Notify user ${userId} about the updated price:`, updatedProduct);\n  };\n  const handleCancelEdit = () => {\n    setIsEditingPrice(false);\n    setEditedPrice((product === null || product === void 0 ? void 0 : product.price) || \"\"); // Reset edited price\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto my-8 p-4 bg-white shadow-lg rounded-lg\",\n    children: product ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-semibold mb-4\",\n        children: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-700 mb-4\",\n        children: product.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-2\",\n        children: [\"Category: \", product.category]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-2\",\n        children: [\"ID: \", product.studentId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-green-600 mb-2\",\n        children: [\"Price:\", \" \", isEditingPrice ? /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"flex items-center\",\n          onSubmit: handleSavePrice,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            value: editedPrice,\n            min: \"0\",\n            max: product.price,\n            step: \"1\",\n            onChange: e => setEditedPrice(e.target.value),\n            className: \"w-64 p-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-2\",\n            children: editedPrice\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"bg-blue-500 text-white px-4 py-2 rounded ml-2\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleCancelEdit,\n            className: \"bg-gray-300 text-gray-700 px-4 py-2 rounded ml-2\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"$\", product.price, /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleEditPrice,\n            className: \"bg-blue-500 text-white px-4 py-2 rounded ml-2\",\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"mt-4\",\n        src: product.productPath,\n        alt: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500\",\n      children: \"No product details available.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductDetail, \"ah4QVRSLZ6thxpHb+XrCXUJmRDI=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = ProductDetail;\nexport default ProductDetail;\nvar _c;\n$RefreshReg$(_c, \"ProductDetail\");","map":{"version":3,"names":["React","useState","useLocation","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","ProductDetail","_s","location","navigate","product","state","isEditingPrice","setIsEditingPrice","editedPrice","setEditedPrice","price","handleEditPrice","handleSavePrice","event","preventDefault","isNaN","alert","newPrice","parseFloat","updatedProduct","response","fetch","id","method","headers","body","JSON","stringify","ok","uploaderUserId","studentId","notifyUser","console","error","statusText","message","userId","log","handleCancelEdit","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","description","category","onSubmit","type","value","min","max","step","onChange","e","target","onClick","src","productPath","alt","_c","$RefreshReg$"],"sources":["E:/SDP/client/src/Components/ProductDetail.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\n\r\nconst ProductDetail = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const { product } = location.state || {};\r\n\r\n  const [isEditingPrice, setIsEditingPrice] = useState(false);\r\n  const [editedPrice, setEditedPrice] = useState(product?.price || \"\");\r\n\r\n  const handleEditPrice = () => {\r\n    setIsEditingPrice(true);\r\n  };\r\n\r\n  const handleSavePrice = async (event) => {\r\n    event.preventDefault();\r\n  \r\n    // Perform validation (optional)\r\n    if (!editedPrice || isNaN(editedPrice)) {\r\n      alert(\"Please enter a valid price.\");\r\n      return;\r\n    }\r\n  \r\n    // Update price logic (use API call, state management, etc.)\r\n    const newPrice = parseFloat(editedPrice);\r\n    const updatedProduct = { ...product, price: newPrice };\r\n  \r\n    // Make API call to update the price on the server\r\n    try {\r\n      const response = await fetch(`/api/products/${product.id}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(updatedProduct),\r\n      });\r\n  \r\n      if (response.ok) {\r\n        const uploaderUserId = product.studentId; \r\n        notifyUser(uploaderUserId, updatedProduct);\r\n      } else {\r\n        console.error(\"Failed to update product:\", response.statusText);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error updating product:\", error.message);\r\n    }\r\n  \r\n    // Redirect or display confirmation message\r\n    navigate(\"/home\"); // Redirect to product list\r\n  };\r\n  \r\n  const notifyUser = (userId, updatedProduct) => {\r\n    // Implement the notification mechanism here\r\n    // This could be sending an email, in-app notification, etc.\r\n    // You may need to make another API call to get user contact details.\r\n    console.log(`Notify user ${userId} about the updated price:`, updatedProduct);\r\n  };\r\n  \r\n\r\n  const handleCancelEdit = () => {\r\n    setIsEditingPrice(false);\r\n    setEditedPrice(product?.price || \"\"); // Reset edited price\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto my-8 p-4 bg-white shadow-lg rounded-lg\">\r\n      {product ? (\r\n        <>\r\n          <h2 className=\"text-2xl font-semibold mb-4\">{product.name}</h2>\r\n          <p className=\"text-gray-700 mb-4\">{product.description}</p>\r\n          <p className=\"text-gray-600 mb-2\">Category: {product.category}</p>\r\n          <p className=\"text-gray-600 mb-2\">ID: {product.studentId}</p>\r\n          <p className=\"text-green-600 mb-2\">\r\n            Price:{\" \"}\r\n            {isEditingPrice ? (\r\n              <form className=\"flex items-center\" onSubmit={handleSavePrice}>\r\n                <input\r\n                  type=\"range\"\r\n                  value={editedPrice}\r\n                  min=\"0\"\r\n                  max={product.price}\r\n                  step=\"1\"\r\n                  onChange={(e) => setEditedPrice(e.target.value)}\r\n                  className=\"w-64 p-2\"\r\n                />\r\n                <span className=\"ml-2\">{editedPrice}</span>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"bg-blue-500 text-white px-4 py-2 rounded ml-2\"\r\n                >\r\n                  Save\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleCancelEdit}\r\n                  className=\"bg-gray-300 text-gray-700 px-4 py-2 rounded ml-2\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </form>\r\n            ) : (\r\n              <span>\r\n                ${product.price}\r\n                <button\r\n                  onClick={handleEditPrice}\r\n                  className=\"bg-blue-500 text-white px-4 py-2 rounded ml-2\"\r\n                >\r\n                  Edit\r\n                </button>\r\n              </span>\r\n            )}\r\n          </p>\r\n          <img className=\"mt-4\" src={product.productPath} alt={product.name} />\r\n        </>\r\n      ) : (\r\n        <p className=\"text-red-500\">No product details available.</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductDetail;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}